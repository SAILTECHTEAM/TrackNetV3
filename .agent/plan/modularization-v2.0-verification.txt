# TrackNetV3 modularization v2.0 verification

## 1) grep: no tracknetv3 references
+ grep -R "tracknetv3" tracknet-core/ tracknet-onnx/ tracknet-pt/ tracknet-pt/extras/
exit: 1 (expect 1 for no matches)

## 2) grep: single get_ensemble_weight definition (tracknet-pt only)
+ grep -R "def get_ensemble_weight" -n tracknet-pt/
tracknet-pt/tracknet/pt/evaluation/ensemble.py:8:def get_ensemble_weight(seq_len, eval_mode):
exit: 0 (expect 0)

## 3) grep: no torch imports in tracknet-onnx
+ grep -R "import torch" tracknet-onnx/
exit: 1 (expect 1 for no matches)

## 4) sys.path import check: core + pt
+ uv run python - <<'PY' ...
pt import ok <class 'tracknet.pt.models.tracknet.TrackNet'>
exit: 0 (expect 0)

## 5) sys.path import check: core + onnx
+ uv run python - <<'PY' ...
2026-01-26 05:08:42.171677661 [W:onnxruntime:Default, device_discovery.cc:164 DiscoverDevicesForPlatform] GPU device discovery failed: device_discovery.cc:89 ReadFileContents Failed to open file: "/sys/class/drm/card0/device/vendor"
onnx import ok <class 'tracknet.onnx.inference.streaming_onnx.StreamingInferenceONNX'>
exit: 0 (expect 0)

## 6) extras/tools: preprocess.py --help
+ uv run python tracknet-pt/extras/tools/preprocess.py --help
usage: preprocess.py [-h] [--data-dir DATA_DIR]

Prepare TrackNet dataset: generate frames, medians, and validation split.

options:
  -h, --help           show this help message and exit
  --data-dir DATA_DIR  Dataset root directory (default:
                       tracknet.pt.datasets.shuttlecock.data_dir)
exit: 0 (expect 0)

## 7) extras/demos: demo_offline.py --help
+ uv run python tracknet-pt/extras/demos/demo_offline.py --help
usage: demo_offline.py [-h] [--tracknet-ckpt TRACKNET_CKPT]
                       [--inpaintnet-ckpt INPAINTNET_CKPT]
                       [--batch-size BATCH_SIZE] [--eval-mode EVAL_MODE]
                       [--large-video] [--max-sample-num MAX_SAMPLE_NUM]
                       [--out-csv OUT_CSV] [--out-video-dir OUT_VIDEO_DIR]
                       [--traj-len TRAJ_LEN]
                       [video]

Run TrackNet offline inference on a video.

positional arguments:
  video                 Input video path

options:
  -h, --help            show this help message and exit
  --tracknet-ckpt TRACKNET_CKPT
  --inpaintnet-ckpt INPAINTNET_CKPT
  --batch-size BATCH_SIZE
  --eval-mode EVAL_MODE
  --large-video
  --max-sample-num MAX_SAMPLE_NUM
  --out-csv OUT_CSV
  --out-video-dir OUT_VIDEO_DIR
  --traj-len TRAJ_LEN
exit: 0 (expect 0)

## 8) root pyproject workspace members
+ grep -n "members\|tracknet-core\|tracknet-onnx\|tracknet-pt" pyproject.toml
4:description = "TrackNet modular workspace (tracknet-core, tracknet-onnx, tracknet-pt)"
11:members = [
12:    "tracknet-core",
13:    "tracknet-onnx",
14:    "tracknet-pt",
exit: 0 (expect 0)
